
{% extends "base.html" %}

{% block content %}
  <h2 class="mb-4">Current Bookings</h2>
  {% if bookings %}
  <table class="table table-bordered table-striped">
    <thead class="table-dark">
      <tr>
        <th>Date</th>
        <th>Start Time</th>
        <th>End Time</th>
        <th>Building</th>
        <th>Room</th>
        <th>Employer</th>
        <th>Event Type</th>
        <th>Action</th>
      </tr>
    </thead>
    <tbody>
      {% for booking in bookings %}
      <tr>
        <td>{{ booking[1] }}</td>
        <td>{{ booking[6] }}</td>
        <td>{{ booking[7] }}</td>
        <td>{{ booking[2] }}</td>
        <td>
          <span class="{{ 'text-success' if booking[-1] == 'TRUE' else 'text-danger' }}">
            {{ booking[3] }}
          </span>
        </td>
        <td>{{ booking[4] }}</td>
        <td>{{ booking[5] }}</td>
        <td>
          <form action="/delete/{{ booking[0] }}" method="POST" onsubmit="return confirm('Delete this booking?');">
            <button type="submit" class="btn btn-danger btn-sm">Delete</button>
          </form>
        </td>
        <td>
          {% if booking[-1]|lower != 't' %}
            <form method="POST" action="/confirm/{{ booking[1] }}/{{ booking[2] }}" style="display:inline;">
              <button type="submit" class="btn btn-sm btn-outline-primary">Confirm</button>
            </form>
          {% else %}
            <span class="text-muted">âœ” Confirmed</span>
          {% endif %}
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  {% else %}
    <p>No bookings found.</p>
  {% endif %}
{% endblock %}


